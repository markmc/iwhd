--- query-orig.c	2010-09-21 16:54:06.052683486 -0400
+++ query-fixed.c	2010-09-21 16:54:06.075667815 -0400
@@ -522,7 +522,7 @@
   while (yybuflen - yypos < 512)
     {
       yybuflen *= 2;
-      yybuf= realloc(yybuf, yybuflen);
+      yybuf= xrealloc(yybuf, yybuflen);
     }
   YY_INPUT((yybuf + yypos), yyn, (yybuflen - yypos));
   if (!yyn) return 0;
@@ -587,7 +587,7 @@
   while (yythunkpos >= yythunkslen)
     {
       yythunkslen *= 2;
-      yythunks= realloc(yythunks, sizeof(yythunk) * yythunkslen);
+      yythunks= xrealloc(yythunks, sizeof(yythunk) * yythunkslen);
     }
   yythunks[yythunkpos].begin=  begin;
   yythunks[yythunkpos].end=    end;
@@ -605,7 +605,7 @@
       while (yytextlen < (yyleng - 1))
 	{
 	  yytextlen *= 2;
-	  yytext= realloc(yytext, yytextlen);
+	  yytext= xrealloc(yytext, yytextlen);
 	}
       memcpy(yytext, yybuf + begin, yyleng);
     }
@@ -1139,13 +1139,13 @@
   if (!yybuflen)
     {
       yybuflen= 1024;
-      yybuf= malloc(yybuflen);
+      yybuf= xmalloc(yybuflen);
       yytextlen= 1024;
-      yytext= malloc(yytextlen);
+      yytext= xmalloc(yytextlen);
       yythunkslen= 32;
-      yythunks= malloc(sizeof(yythunk) * yythunkslen);
+      yythunks= xmalloc(sizeof(yythunk) * yythunkslen);
       yyvalslen= 32;
-      yyvals= malloc(sizeof(YYSTYPE) * yyvalslen);
+      yyvals= xmalloc(sizeof(YYSTYPE) * yyvalslen);
       yybegin= yyend= yypos= yylimit= yythunkpos= 0;
     }
   yybegin= yyend= yypos;
